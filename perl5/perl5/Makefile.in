#	$Id$
#
# Makefile.in for Perl 5 compiler driver
#

VPATH = @srcdir@
srcdir = @srcdir@
top_srcdir = @top_srcdir@
top_builddir = @top_builddir@
prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
libexecdir = @libexecdir@
datarootdir = @datarootdir@
mandir = @mandir@

CC = @CC@
CFLAGS = @CFLAGS@ @ADD_CFLAGS@
CPPFLAGS = @CPPFLAGS@ @ADD_CPPFLAGS@ -I$(srcdir) -I$(top_builddir) \
	-DLIBEXECDIR=\"$(libexecdir)/\" -DINCLUDEDIR=\"$(prefix)/include/\" \
	-DPCCINCDIR=\"$(libexecdir)/pcc/$(TARGMACH)/$(VERSION)/include/\"
LIBS = @LIBS@
LDFLAGS = @LDFLAGS@
INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@

TARGMACH = @targmach@
VERSION = @version@

DEST = @BINPREFIX@perl5@EXEEXT@

OBJS = perl5.o

all: $(DEST)

$(DEST): $(OBJS)
	$(CC) $(LDFLAGS) $(OBJS) -o $@ $(LIBS)

perl5.o: $(srcdir)/perl5.c
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $(srcdir)/perl5.c

install: all
	test -z "$(DESTDIR)$(bindir)" || mkdir -p "$(DESTDIR)$(bindir)"
	$(INSTALL_PROGRAM) $(DEST) $(DESTDIR)$(bindir)/$(DEST)

clean:
	rm -f $(OBJS) $(DEST)

distclean: clean
	rm -f Makefile

.PHONY: all install clean distclean
