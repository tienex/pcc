/*
 * Copyright (c) 2025 PCC Pascal Compiler
 *
 * Wirth Languages and Ada Dialect Definitions (Part 2)
 * Modula-3, Oberon, and Ada dialects
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <strings.h>
#include "dialect.h"

/* Modula-3 (DEC SRC) */
dialect_features_t modula3_features = {
	.language_family = 2,            /* Modula-3 */
	.allow_nested_comments = 1,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 1,          /* M3 allows underscores */
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 1,     /* TEXT literals */
	.allow_string_concat = 1,
	.allow_escape_sequences = 1,
	.pstring_literals = 0,
	.null_terminated_strings = 0,    /* M3 uses TEXT */
	.allow_unsigned_types = 1,       /* CARDINAL */
	.allow_int64 = 1,                /* LONGINT */
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 1,       /* REF ARRAY OF */
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,          /* Uses TEXT */
	.allow_subranges = 1,
	.allow_opaque_types = 1,
	.allow_type_extension = 1,       /* Object types with extension */
	.allow_record_variants = 1,
	.allow_objects = 1,              /* OBJECT type */
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 1,     /* METHODS */
	.allow_tagged_types = 0,
	.allow_default_params = 1,       /* M3 has default parameters */
	.allow_overloading = 0,
	.allow_inline_directive = 1,
	.allow_forward_directive = 0,
	.allow_external_directive = 1,
	.allow_interrupt_directive = 0,
	.allow_varargs = 0,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,              /* INTERFACE/MODULE */
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,        /* IMPORT */
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 1,        /* EXIT in LOOP */
	.allow_loop_statement = 1,       /* LOOP...EXIT...END */
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 0,
	.allow_processes = 0,
	.allow_threads = 1,              /* M3 has threads */
	.allow_protected_types = 1,      /* LOCK statement */
	.allow_pointers = 1,             /* REF */
	.allow_nil = 1,
	.allow_address_type = 1,
	.allow_unsafe = 1,               /* UNSAFE modules */
	.allow_unchecked = 0,
	.allow_exceptions = 1,           /* M3 has exceptions */
	.allow_try_except = 1,           /* TRY...EXCEPT */
	.allow_try_finally = 1,          /* TRY...FINALLY */
	.allow_absolute = 0,
	.allow_packed = 1,               /* BITS FOR */
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 1,              /* Generic interfaces */
	.allow_pragma = 1,               /* <*PRAGMA*> */
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 1,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* Critical Mass Modula-3 */
dialect_features_t modula3_cm_features = {
	.language_family = 2,
	.allow_nested_comments = 1,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 1,
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 1,
	.allow_string_concat = 1,
	.allow_escape_sequences = 1,
	.pstring_literals = 0,
	.null_terminated_strings = 0,
	.allow_unsigned_types = 1,
	.allow_int64 = 1,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 1,
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 1,
	.allow_opaque_types = 1,
	.allow_type_extension = 1,
	.allow_record_variants = 1,
	.allow_objects = 1,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 1,
	.allow_tagged_types = 0,
	.allow_default_params = 1,
	.allow_overloading = 0,
	.allow_inline_directive = 1,
	.allow_forward_directive = 0,
	.allow_external_directive = 1,
	.allow_interrupt_directive = 0,
	.allow_varargs = 0,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 1,
	.allow_loop_statement = 1,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 0,
	.allow_processes = 0,
	.allow_threads = 1,
	.allow_protected_types = 1,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 1,
	.allow_unsafe = 1,
	.allow_unchecked = 0,
	.allow_exceptions = 1,
	.allow_try_except = 1,
	.allow_try_finally = 1,
	.allow_absolute = 0,
	.allow_packed = 1,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 1,
	.allow_pragma = 1,
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 2,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* Polytechnique Modula-3 */
dialect_features_t modula3_pm_features = {
	.language_family = 2,
	.allow_nested_comments = 1,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 1,
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 1,
	.allow_string_concat = 1,
	.allow_escape_sequences = 1,
	.pstring_literals = 0,
	.null_terminated_strings = 0,
	.allow_unsigned_types = 1,
	.allow_int64 = 1,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 1,
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 1,
	.allow_opaque_types = 1,
	.allow_type_extension = 1,
	.allow_record_variants = 1,
	.allow_objects = 1,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 1,
	.allow_tagged_types = 0,
	.allow_default_params = 1,
	.allow_overloading = 0,
	.allow_inline_directive = 1,
	.allow_forward_directive = 0,
	.allow_external_directive = 1,
	.allow_interrupt_directive = 0,
	.allow_varargs = 0,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 1,
	.allow_loop_statement = 1,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 0,
	.allow_processes = 0,
	.allow_threads = 1,
	.allow_protected_types = 1,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 1,
	.allow_unsafe = 1,
	.allow_unchecked = 0,
	.allow_exceptions = 1,
	.allow_try_except = 1,
	.allow_try_finally = 1,
	.allow_absolute = 0,
	.allow_packed = 1,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 1,
	.allow_pragma = 1,
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 1,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* Oberon (original) */
dialect_features_t oberon_features = {
	.language_family = 3,            /* Oberon */
	.allow_nested_comments = 1,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 0,
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 0,
	.allow_string_concat = 0,
	.allow_escape_sequences = 0,
	.pstring_literals = 0,
	.null_terminated_strings = 1,    /* ARRAY OF CHAR */
	.allow_unsigned_types = 0,       /* No CARDINAL in Oberon */
	.allow_int64 = 0,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 0,
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 0,            /* No subranges in Oberon */
	.allow_opaque_types = 0,
	.allow_type_extension = 1,       /* Type extension */
	.allow_record_variants = 0,      /* No variant records */
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 0,     /* Added in Oberon-2 */
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 0,
	.allow_forward_directive = 0,
	.allow_external_directive = 0,
	.allow_interrupt_directive = 0,
	.allow_varargs = 1,
	.allow_function_types = 1,       /* PROCEDURE types */
	.allow_units = 0,
	.allow_modules = 1,              /* MODULE */
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,        /* IMPORT */
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 1,       /* LOOP */
	.allow_with_statement = 1,       /* WITH type guard */
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 0,
	.allow_processes = 0,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 0,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 0,
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 0,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 0,
	.allow_pragma = 0,
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 0,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* Oberon-2 */
dialect_features_t oberon2_features = {
	.language_family = 3,
	.allow_nested_comments = 1,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 0,
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 0,
	.allow_string_concat = 0,
	.allow_escape_sequences = 0,
	.pstring_literals = 0,
	.null_terminated_strings = 1,
	.allow_unsigned_types = 0,
	.allow_int64 = 1,                /* LONGINT */
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 0,
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 0,
	.allow_opaque_types = 0,
	.allow_type_extension = 1,
	.allow_record_variants = 0,
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 1,     /* Type-bound procedures! */
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 0,
	.allow_forward_directive = 0,
	.allow_external_directive = 0,
	.allow_interrupt_directive = 0,
	.allow_varargs = 1,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 1,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 0,
	.allow_processes = 0,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 0,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 0,
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 0,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 0,
	.allow_pragma = 0,
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 0,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* Oberon-07 (revised Oberon) */
dialect_features_t oberon07_features = {
	.language_family = 3,
	.allow_nested_comments = 1,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 0,
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 0,
	.allow_string_concat = 0,
	.allow_escape_sequences = 0,
	.pstring_literals = 0,
	.null_terminated_strings = 1,
	.allow_unsigned_types = 0,
	.allow_int64 = 1,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 0,
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 0,
	.allow_opaque_types = 0,
	.allow_type_extension = 1,
	.allow_record_variants = 0,
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 1,
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 0,
	.allow_forward_directive = 0,
	.allow_external_directive = 0,
	.allow_interrupt_directive = 0,
	.allow_varargs = 1,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 1,
	.allow_with_statement = 0,       /* Removed in Oberon-07 */
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 0,
	.allow_processes = 0,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 0,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 0,
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 0,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 0,
	.allow_pragma = 0,
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 0,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* Component Pascal (BlackBox) */
dialect_features_t component_pascal_features = {
	.language_family = 3,
	.allow_nested_comments = 1,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 0,
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 0,
	.allow_string_concat = 0,
	.allow_escape_sequences = 0,
	.pstring_literals = 0,
	.null_terminated_strings = 1,
	.allow_unsigned_types = 0,
	.allow_int64 = 1,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 1,       /* POINTER TO ARRAY OF */
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 0,
	.allow_opaque_types = 0,
	.allow_type_extension = 1,
	.allow_record_variants = 0,
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 1,
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 0,
	.allow_forward_directive = 0,
	.allow_external_directive = 1,   /* Component Pascal extension */
	.allow_interrupt_directive = 0,
	.allow_varargs = 1,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 1,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 0,
	.allow_processes = 0,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 0,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 1,           /* Component Pascal has TRAP */
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 0,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 0,
	.allow_pragma = 0,
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 0,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* Continued with Active Oberon and Ada in next message... */
