/*
 * Copyright (c) 2025 PCC Pascal Compiler
 *
 * Wirth Languages and Ada Dialect Definitions
 * Extended dialect support for Modula-2, Modula-3, Oberon, and Ada
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <strings.h>
#include "dialect.h"

/* UCSD Pascal (P-System) */
dialect_features_t ucsd_features = {
	.language_family = 0,           /* Pascal */
	.allow_nested_comments = 0,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 0,
	.allow_inline_assembly = 0,
	.allow_goto = 1,
	.allow_cstring_literals = 0,
	.allow_string_concat = 1,
	.allow_escape_sequences = 0,
	.pstring_literals = 1,
	.null_terminated_strings = 0,
	.allow_unsigned_types = 0,
	.allow_int64 = 0,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 0,
	.allow_open_arrays = 0,
	.allow_set_operators = 1,
	.allow_string_type = 1,          /* UCSD has STRING type */
	.allow_subranges = 1,
	.allow_opaque_types = 0,
	.allow_type_extension = 0,
	.allow_record_variants = 1,
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 0,
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 0,
	.allow_forward_directive = 1,
	.allow_external_directive = 1,
	.allow_interrupt_directive = 0,
	.allow_varargs = 0,
	.allow_function_types = 0,
	.allow_units = 1,                /* UCSD has units */
	.allow_modules = 0,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 1,
	.allow_import_clause = 0,
	.require_module_header = 0,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 0,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 0,
	.allow_coroutines = 0,
	.allow_processes = 0,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 0,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 0,
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 1,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 0,
	.allow_pragma = 0,
	.allow_separate = 0,
	.case_sensitive = 0,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 16,
	.default_real_type = 0,
	.use_begin_end = 1,
	.use_do_end = 0,
	.assignment_operator = 0,
};

/* Think Pascal (Symantec/Lightspeed) */
dialect_features_t think_features = {
	.language_family = 0,
	.allow_nested_comments = 0,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 1,
	.allow_inline_assembly = 0,
	.allow_goto = 1,
	.allow_cstring_literals = 1,
	.allow_string_concat = 1,
	.allow_escape_sequences = 0,
	.pstring_literals = 1,
	.null_terminated_strings = 0,
	.allow_unsigned_types = 1,
	.allow_int64 = 0,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 0,
	.allow_open_arrays = 0,
	.allow_set_operators = 1,
	.allow_string_type = 1,
	.allow_subranges = 1,
	.allow_opaque_types = 0,
	.allow_type_extension = 0,
	.allow_record_variants = 1,
	.allow_objects = 1,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 0,
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 1,
	.allow_forward_directive = 1,
	.allow_external_directive = 1,
	.allow_interrupt_directive = 0,
	.allow_varargs = 0,
	.allow_function_types = 0,
	.allow_units = 1,
	.allow_modules = 0,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 1,
	.allow_import_clause = 0,
	.require_module_header = 0,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 0,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 0,
	.allow_coroutines = 0,
	.allow_processes = 0,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 0,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 0,
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 1,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 0,
	.allow_pragma = 0,
	.allow_separate = 0,
	.case_sensitive = 0,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 16,
	.default_real_type = 0,
	.use_begin_end = 1,
	.use_do_end = 0,
	.assignment_operator = 0,
};

/* Modula-2 PIM 2nd edition */
dialect_features_t modula2_pim2_features = {
	.language_family = 1,            /* Modula-2 */
	.allow_nested_comments = 1,      /* Modula-2 allows nested comments */
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 0,
	.allow_inline_assembly = 0,
	.allow_goto = 0,                 /* Modula-2 does not have goto */
	.allow_cstring_literals = 0,
	.allow_string_concat = 0,
	.allow_escape_sequences = 0,
	.pstring_literals = 0,
	.null_terminated_strings = 1,    /* ARRAY OF CHAR */
	.allow_unsigned_types = 1,       /* CARDINAL type */
	.allow_int64 = 0,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 0,
	.allow_open_arrays = 1,          /* ARRAY OF T parameters */
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 1,            /* [low..high] */
	.allow_opaque_types = 1,         /* Modula-2 opaque types */
	.allow_type_extension = 0,
	.allow_record_variants = 1,
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 0,
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 0,
	.allow_forward_directive = 0,
	.allow_external_directive = 0,
	.allow_interrupt_directive = 0,
	.allow_varargs = 1,              /* VAR parameter arrays */
	.allow_function_types = 1,       /* PROCEDURE types */
	.allow_units = 0,
	.allow_modules = 1,              /* DEFINITION/IMPLEMENTATION MODULE */
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,        /* IMPORT */
	.require_module_header = 1,      /* MODULE required */
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 1,       /* LOOP...EXIT...END */
	.allow_with_statement = 1,       /* WITH statement */
	.allow_case_else = 1,            /* ELSE in CASE */
	.allow_return_statement = 1,     /* RETURN */
	.allow_coroutines = 1,           /* Modula-2 has coroutines */
	.allow_processes = 1,            /* PROCESS type */
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,                  /* NIL */
	.allow_address_type = 1,         /* ADDRESS type */
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 0,
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 0,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 0,
	.allow_pragma = 0,
	.allow_separate = 0,
	.case_sensitive = 1,             /* Modula-2 is case-sensitive */
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 16,
	.default_real_type = 0,
	.use_begin_end = 1,              /* BEGIN...END */
	.use_do_end = 1,                 /* DO...END */
	.assignment_operator = 0,        /* := */
};

/* Modula-2 PIM 3rd edition */
dialect_features_t modula2_pim3_features = {
	.language_family = 1,
	.allow_nested_comments = 1,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 0,
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 0,
	.allow_string_concat = 0,
	.allow_escape_sequences = 0,
	.pstring_literals = 0,
	.null_terminated_strings = 1,
	.allow_unsigned_types = 1,
	.allow_int64 = 0,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 0,
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 1,
	.allow_opaque_types = 1,
	.allow_type_extension = 0,
	.allow_record_variants = 1,
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 0,
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 0,
	.allow_forward_directive = 0,
	.allow_external_directive = 0,
	.allow_interrupt_directive = 0,
	.allow_varargs = 1,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 1,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 1,
	.allow_processes = 1,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 1,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 0,
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 0,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 0,
	.allow_pragma = 0,
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 1,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* Modula-2 PIM 4th edition */
dialect_features_t modula2_pim4_features = {
	.language_family = 1,
	.allow_nested_comments = 1,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 0,
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 0,
	.allow_string_concat = 0,
	.allow_escape_sequences = 0,
	.pstring_literals = 0,
	.null_terminated_strings = 1,
	.allow_unsigned_types = 1,
	.allow_int64 = 1,                /* LONGINT */
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 0,
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 1,
	.allow_opaque_types = 1,
	.allow_type_extension = 0,
	.allow_record_variants = 1,
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 0,
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 0,
	.allow_forward_directive = 0,
	.allow_external_directive = 0,
	.allow_interrupt_directive = 0,
	.allow_varargs = 1,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 1,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 1,
	.allow_processes = 1,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 1,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 1,           /* PIM4 has exceptions */
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 0,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 0,
	.allow_pragma = 0,
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 1,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* ISO Modula-2 */
dialect_features_t modula2_iso_features = {
	.language_family = 1,
	.allow_nested_comments = 1,
	.allow_cpp_comments = 0,
	.allow_dollar_ident = 0,
	.allow_underscores = 0,
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 0,
	.allow_string_concat = 0,
	.allow_escape_sequences = 0,
	.pstring_literals = 0,
	.null_terminated_strings = 1,
	.allow_unsigned_types = 1,
	.allow_int64 = 1,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 0,
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 1,
	.allow_opaque_types = 1,
	.allow_type_extension = 0,
	.allow_record_variants = 1,
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 0,
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 0,
	.allow_forward_directive = 0,
	.allow_external_directive = 0,
	.allow_interrupt_directive = 0,
	.allow_varargs = 1,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 1,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 1,
	.allow_processes = 1,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 1,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 1,
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 0,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 1,              /* ISO M2 has generic modules */
	.allow_pragma = 1,               /* ISO M2 has pragmas */
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 1,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 1,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* GNU Modula-2 */
dialect_features_t modula2_gnu_features = {
	.language_family = 1,
	.allow_nested_comments = 1,
	.allow_cpp_comments = 1,         /* GNU extension */
	.allow_dollar_ident = 0,
	.allow_underscores = 1,          /* GNU extension */
	.allow_inline_assembly = 1,      /* GNU extension */
	.allow_goto = 0,
	.allow_cstring_literals = 0,
	.allow_string_concat = 0,
	.allow_escape_sequences = 0,
	.pstring_literals = 0,
	.null_terminated_strings = 1,
	.allow_unsigned_types = 1,
	.allow_int64 = 1,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 0,
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 1,
	.allow_opaque_types = 1,
	.allow_type_extension = 0,
	.allow_record_variants = 1,
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 0,
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 0,
	.allow_inline_directive = 1,
	.allow_forward_directive = 0,
	.allow_external_directive = 1,
	.allow_interrupt_directive = 0,
	.allow_varargs = 1,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 1,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 1,
	.allow_processes = 1,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 1,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 1,
	.allow_try_except = 0,
	.allow_try_finally = 1,         /* GNU extension */
	.allow_absolute = 0,
	.allow_packed = 0,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 1,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 1,
	.allow_pragma = 1,
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 1,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* Modula-2 R10 (modern revision) */
dialect_features_t modula2_r10_features = {
	.language_family = 1,
	.allow_nested_comments = 1,
	.allow_cpp_comments = 1,
	.allow_dollar_ident = 0,
	.allow_underscores = 1,
	.allow_inline_assembly = 0,
	.allow_goto = 0,
	.allow_cstring_literals = 0,
	.allow_string_concat = 1,
	.allow_escape_sequences = 1,
	.pstring_literals = 0,
	.null_terminated_strings = 1,
	.allow_unsigned_types = 1,
	.allow_int64 = 1,
	.allow_currency = 0,
	.allow_variant = 0,
	.allow_dynamic_arrays = 1,       /* R10 extension */
	.allow_open_arrays = 1,
	.allow_set_operators = 1,
	.allow_string_type = 0,
	.allow_subranges = 1,
	.allow_opaque_types = 1,
	.allow_type_extension = 1,       /* R10 has type extension */
	.allow_record_variants = 1,
	.allow_objects = 0,
	.allow_classes = 0,
	.allow_interfaces = 0,
	.allow_properties = 0,
	.allow_operator_overload = 0,
	.allow_type_bound_procs = 1,     /* R10 has methods */
	.allow_tagged_types = 0,
	.allow_default_params = 0,
	.allow_overloading = 1,          /* R10 extension */
	.allow_inline_directive = 1,
	.allow_forward_directive = 0,
	.allow_external_directive = 1,
	.allow_interrupt_directive = 0,
	.allow_varargs = 1,
	.allow_function_types = 1,
	.allow_units = 0,
	.allow_modules = 1,
	.allow_packages = 0,
	.allow_namespaces = 0,
	.allow_uses_clause = 0,
	.allow_import_clause = 1,
	.require_module_header = 1,
	.allow_break_continue = 0,
	.allow_exit_function = 0,
	.allow_loop_statement = 1,
	.allow_with_statement = 1,
	.allow_case_else = 1,
	.allow_return_statement = 1,
	.allow_coroutines = 0,
	.allow_processes = 0,
	.allow_threads = 0,
	.allow_protected_types = 0,
	.allow_pointers = 1,
	.allow_nil = 1,
	.allow_address_type = 1,
	.allow_unsafe = 0,
	.allow_unchecked = 0,
	.allow_exceptions = 1,
	.allow_try_except = 0,
	.allow_try_finally = 0,
	.allow_absolute = 0,
	.allow_packed = 0,
	.allow_far_near = 0,
	.allow_interrupt = 0,
	.allow_assembler = 0,
	.allow_exports = 0,
	.allow_resourcestring = 0,
	.allow_threadvar = 0,
	.allow_generic = 1,
	.allow_pragma = 1,
	.allow_separate = 0,
	.case_sensitive = 1,
	.strict_iso = 0,
	.require_program_header = 0,
	.require_forward_decl = 0,
	.require_type_declarations = 0,
	.default_int_size = 32,
	.default_real_type = 1,
	.use_begin_end = 1,
	.use_do_end = 1,
	.assignment_operator = 0,
};

/* Continued in next part due to character limits... */
